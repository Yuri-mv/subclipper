
<!doctype html>
<html lang="en">
  <head>
    <title>Documentation</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.8.0/github-markdown.min.css" integrity="sha256-Lt9340Td+22fUGyXnrvSDEy9lnZunEDDyYyQ3QOGgeg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" integrity="sha256-3YM6A3pH4QFCl9WbSU8oXF5N6W/2ylvW0o2g+Z6TmLQ=" crossorigin="anonymous" />
    <style>
      .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 100%;
        margin: 0 auto;
        padding: 15px;
      }

      @media (max-width: 767px) {
        .markdown-body {
          padding: 5px;
        }
      }
    </style>
  </head>
  <body>
     <div class="markdown-body">
      <h2>Azure Media Services Subclipper editor - Assets pane loader callback</h2>
<pre><code class="language-js">    <span class="hljs-comment">// Video Assets Pane Callback</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// Filter Parameters:</span>
    <span class="hljs-comment">// - search: string value term that will be used in the back-end to filter assets by name.</span>
    <span class="hljs-comment">// - skip: int value used for pagination in the back-end that allows skipping a number of assets in the response.</span>
    <span class="hljs-comment">// - take: int value used for pagination in the back-end that allows defining the number of assets to include in the response.</span>
    <span class="hljs-comment">// - type: ('filter', 'asset') value that will be used in the back-end to filter assets by type.</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// Returns: a Promise object that, when resolved, retuns an object containing an array of assets (input contract)</span>
    <span class="hljs-comment">//          that satisfies the filter parameters, plus optionally the total types of files available:</span>
    <span class="hljs-comment">// {</span>
    <span class="hljs-comment">//  total: 100,</span>
    <span class="hljs-comment">//  assets: [{...}],</span>
    <span class="hljs-comment">// }</span>
    <span class="hljs-keyword">var</span> onLoadAssets = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">search, skip, take, type</span>) </span>{
        <span class="hljs-keyword">var</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{
            <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> perform the back-end AJAX request to get the assets using the filter parameters (search, skip, take).</span>
            <span class="hljs-keyword">var</span> assets = [{
                <span class="hljs-comment">// asset (input contract)</span>
            }, {
                <span class="hljs-comment">// asset (input contract)</span>
            }];

            <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* everything turned out fine */</span> assets !== <span class="hljs-literal">null</span>) {
                resolve({
                    <span class="hljs-attr">total</span>: <span class="hljs-number">100</span>,
                    <span class="hljs-attr">assets</span>: assets
                });
            }
            <span class="hljs-keyword">else</span> {
                reject(<span class="hljs-built_in">Error</span>(<span class="hljs-string">"error details"</span>));
            }
        });

        <span class="hljs-keyword">return</span> promise;
    };

    <span class="hljs-comment">// Create widget instance:</span>
    <span class="hljs-comment">// - using a root element selector</span>
    <span class="hljs-comment">// - enabling the Video Assets panel by registering a callback in the 'assetsPanelLoaderCallback' option parameter.</span>
    <span class="hljs-keyword">var</span> widget = <span class="hljs-keyword">new</span> subclipper({
        <span class="hljs-attr">selector</span>: <span class="hljs-string">'#root'</span>,

        <span class="hljs-comment">// Enable the Video Assets panel in the widget to automatically load assets (input contract)</span>
        <span class="hljs-attr">assetsPanelLoaderCallback</span>: onLoadAssets
    });

    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">// The widget will automatically invoke the 'assetsPanelLoaderCallback' callback with the filter parameters specified by the user </span>
    <span class="hljs-comment">// and load assets returned by the Promise into the Video Assets panel.</span>
    <span class="hljs-comment">// ...</span>
</code></pre>
<p>The return assets should follow this <a href="input.html">contract</a>.</p>

    </div>
  </body>
</html>